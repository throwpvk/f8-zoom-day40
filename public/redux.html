<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Redux Demo</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
      }
      #counter {
        font-size: 24px;
        margin-bottom: 20px;
      }
      button {
        margin: 5px;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div id="counter">Counter: 0</div>
    <button id="increase">Increase</button>
    <button id="decrease">Decrease</button>
    <button id="reset">Reset</button>
    <button id="removeListener">Remove Listener</button>

    <script type="module">
      import { createStore } from "./redux.js";

      const counterReducer = (state = 0, action) => {
        switch (action.type) {
          case "INCREMENT":
            return state + 1;
          case "DECREMENT":
            return state - 1;
          case "RESET":
            return 0;
          default:
            return state;
        }
      };

      const store = createStore(counterReducer, 0);

      const updateUI = () => {
        document.getElementById(
          "counter"
        ).textContent = `Counter: ${store.getState()}`;
      };

      let unsubscribe = store.subscribe(() => {
        updateUI();
      });

      document.getElementById("increase").addEventListener("click", () => {
        store.dispatch({ type: "INCREMENT" });
      });

      document.getElementById("decrease").addEventListener("click", () => {
        store.dispatch({ type: "DECREMENT" });
      });

      document.getElementById("reset").addEventListener("click", () => {
        store.dispatch({ type: "RESET" });
      });

      document
        .getElementById("removeListener")
        .addEventListener("click", () => {
          unsubscribe();
        });

      updateUI();
    </script>
  </body>
</html>
